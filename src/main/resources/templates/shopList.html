<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8">
<title>高校水果预订系统</title>
<link rel="stylesheet" href="../css/shopList.css" />
<script language="JavaScript" src="../js/jquery-3.6.0.js"></script>

</head>
<body>
	
	<header>
		<img class="img1" src="../images/fruit.png" />
		<div class="titl">高校水果预订系统</div>
		<div class="user-details">
			<img class="img2" src="../images/tx.jpg" />
			<div th:text="${currentUser.username}"></div>
		</div>
	</header>
	
	<div class="query">
		<input id="shop_name"  placeholder="请输入店铺名(默认查询所有商店)" th:value="${name}"/>
		<button onclick="queryShop()">搜索</button>
	</div>
	
	<div th:if="${type} eq 1" class="shop_list">
		<div class="td" th:each="shop:${shopList1}">
			<div th:onclick="toShop([[${shop.id}]])">
				<div th:text="${shop.name}"></div>
				<div th:text="${shop.address}"></div>
				<div th:text="${shop.description}"></div>
			</div>
		</div>
	</div>
	<div th:if="${type} eq 1" class="shop_list">
		<div class="td" th:each="shop:${shopList2}">
			<div th:onclick="toShop([[${shop.id}]])">
				<div th:text="${shop.name}"></div>
				<div th:text="${shop.address}"></div>
				<div th:text="${shop.description}"></div>
			</div>
		</div>
	</div>
	<div th:if="${type} eq 1" class="shop_list">
		<div class="td" th:each="shop:${shopList3}">
			<div th:onclick="toShop([[${shop.id}]])">
				<div th:text="${shop.name}"></div>
				<div th:text="${shop.address}"></div>
				<div th:text="${shop.description}"></div>
			</div>
		</div>
	</div>

	<div th:if="${type} eq 2" class="shop_list">
		<div class="td" th:each="shop:${shops}">
			<div th:onclick="toShop([[${shop.id}]])">
				<div th:text="${shop.name}"></div>
				<div th:text="${shop.address}"></div>
				<div th:text="${shop.description}"></div>
			</div>
		</div>
	</div>

	
	<div class="page_num">
		<button th:if="${pageInfo.pageNum!=1}" th:onclick="prePage([[${pageInfo.prePage}]])">上一页</button>
		<div th:each="page:${#numbers.sequence(1,pageInfo.pages)}">
			<a th:href="@{/shop/shopList(page=${page})}"><p th:text="${page}"></p></a>
		</div>
		<button th:if="${pageInfo.pageNum!=pageInfo.pages}" th:onclick="nextPage([[${pageInfo.nextPage}]])">下一页</button>
		<p>共<span th:text="${pageInfo.pages}"></span>页</p>
	</div>
    <script>
		function nextPage(page) {
			window.location.href="/shop/shopList?page="+page;
		}
		function prePage(page) {
			window.location.href="/shop/shopList?page="+page;
		}
	</script>
</body>
<script type="text/javascript" src="../js/shopList.js"></script>
</html>